# 蓝图通信

![1](F:\MyNotes\UE4\蓝图通信\1.png)



## 1. 关卡蓝图或蓝图类在内部当中的信息交互

![2](F:\MyNotes\UE4\蓝图通信\2.png)

## 2. 关卡蓝图和蓝图类与场景内部对象的通信

首先是关卡蓝图，如果要获取场景内部的对象，直接点击场景内部对象，然后回到关卡蓝图当中，邮件获取对象的引用即可。

如果是蓝图类的话。首先新建一个变量，并将类型设置为static mesh actor。在设置的时候选择对象引用，因为你要引用的是场景当中的实例。创建完变量之后，将这个变量public。然后把蓝图类拖入场景当中，因为只有在同一个场景当中才能引用。然后在蓝图类的细节面板当中的默认部分，把要引用的对象选中。这样的话就能在蓝图类当中通过该变量来获取相应的对象了。

如果想获取带有骨骼的模型，就把变量的类型改成actor

## 3. 蓝图类之间的通信

获取的方法也是和上一节的蓝图类引用场景内部对象一样，直接创建变量然后引用想要调用的蓝图类，再直接获取蓝图类当中的变量。

当然，也需要这两个蓝图类在关卡场景当中。

在调用的蓝图类弄好之后，还需要在细节面板中获取被调用的蓝图类。

因为限定了变量的类型是被调用的那个类，因此在细节面板中使用吸管的时候只能吸取那个被调用的类了。

## 4. 通过中间变量的通信

3中的方法有局限性，就是通信的两个蓝图类都必须在场景当中有对象。

可以使用角色对象来作为中间变量。因为角色对象会一直出现在场景当中，所以合适。

首先在角色蓝图中创建变量。然后将变量公有化，并在场景当中拾取对应的变量。

这样的话，两个蓝图类就可以通过中间角色蓝图类这个中间变量来互相调用了。因为这两个对象都是在角色蓝图类当中被当作变量。

## 5.蓝图类与关卡蓝图的通信

首先，关卡蓝图调用蓝图类很简单，直接点击然后获取

蓝图类要调用关卡蓝图的话就需要在关卡蓝图当中设置自定义事件，然后蓝图类通过调用这个自定义事件来执行对应的操作。

获取关卡蓝图当中自定义事件的节点名称是：execute console command

command参数是"ce + 自定义事件名称"

## 6. 遍历搜索蓝图类的引用

如果有某个蓝图类在场景当中被多次使用，那么可以使用get all actors of class 节点来统一获取。



注意，如果有某个蓝图类在场景当中被多次使用，想要分别更改各个不同实例的属性。那么可以设置一个变量。如果要改变一个text的话，就将text设置为一个变量，然后将要改变的组件引入到蓝图当中。通过蓝图+event  tick节点，让对象在游戏开始时动态修改。

如果想要游戏没有开始时就修改的话，就在construction scrip当中来做上述操作。
